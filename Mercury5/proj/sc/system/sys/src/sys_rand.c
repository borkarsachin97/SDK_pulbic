/***************************************************************************/
/*  File    : sys_rand.c                                                   */
/*-------------------------------------------------------------------------*/
/*  Scope   :                                                              */
/*                                                                         */
/*  Contents:                                                              */
/*                                                                         */
/*  Historical :                                                           */
/*-------------------------------------------------------------------------*/
/*   Date   | Author |         Modification                                */
/*----------+--------+-----------------------------------------------------*/
/* 13.04.01 |  RDO   | Creation from JFN's functions                       */
/***************************************************************************/
#include "stdcomp.h"
#include "kernel.h"
#include "sys_rand.hp"
#include "drv_timer_types.h"
#include "drv_timer_api.h"

#ifdef __TARGET__
//#include "hwl_peri.h"
#endif // __TARGET__


/***************************************************************************/
/*  Function   : sys_Random8                                               */
/*-------------------------------------------------------------------------*/
/*  scope      : Send back a random non null and u8 integer                */
/*                                                                         */
/*  Return     :                                                           */
/*                                                                         */
/*-------------------------------------------------------------------------*/
/*  Variable Name     |IN |OUT|GLB|  Utilisation                           */
/*--------------------+---+---+---+----------------------------------------*/
/*                    |   |   |   |                                        */
/***************************************************************************/
u8 sys_Random8 (void)
{
    return (DrvTimerStdaTimerGetTick()&0xFF);
}

/***************************************************************************/
/*  Function   : sys_Random8                                               */
/*-------------------------------------------------------------------------*/
/*  scope      : Send back a random non null and u32 integer               */
/*                                                                         */
/*  Return     :                                                           */
/*                                                                         */
/*-------------------------------------------------------------------------*/
/*  Variable Name     |IN |OUT|GLB|  Utilisation                           */
/*--------------------+---+---+---+----------------------------------------*/
/*                    |   |   |   |                                        */
/***************************************************************************/
u32 sys_Random32( void )
{
   u32 Rand ;

   Rand =   ((u32)sys_Random8()<<0) | ((u32)sys_Random8()<<8)
          | ((u32)sys_Random8()<<16)| ((u32)sys_Random8()<<24);

   return Rand;
}

/***************************************************************************/
/*  Function   : sys_Random                                                */
/*-------------------------------------------------------------------------*/
/*  scope      : Send back and u8 integer included in the interval         */
/*               0-(MAX-1)                                                 */
/*               N is a u8 integer passed in parameter.                    */
/*                                                                         */
/*  Return     :                                                           */
/*                                                                         */
/*-------------------------------------------------------------------------*/
/*  Variable Name     |IN |OUT|GLB|  Utilisation                           */
/*--------------------+---+---+---+----------------------------------------*/
/*                    |   |   |   |                                        */
/***************************************************************************/
u8 sys_Random (u8 Max)
{
   u8 random;

   random = sys_Random8();
   while(random >= Max) random = random >> 1;

   return random;
}

