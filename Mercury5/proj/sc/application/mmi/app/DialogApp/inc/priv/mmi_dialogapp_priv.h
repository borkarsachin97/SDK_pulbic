/**
* @file mmi_dialogapp_priv.h
*
* State Machine Application - DIALOGAPP
* Generated by XFSM v1.0, CodeVer=v0.24
*
* Class Id: CLSID_DIALOGAPP
*
*
* @version $Id$
*/
#ifndef __MMI_DIALOGAPP_PRIV_H__
#define __MMI_DIALOGAPP_PRIV_H__
/*=============================================================*/
// Include files
/*=============================================================*/
#include "mmi_mae_common_def.h"
#include "mmi_common_dialog.h"
#include "sys_sys_wmh_sys.h"
#include "mmi_baseapplet.h"
#include "mmi_srv_header.h"
/*=============================================================*/
// Data type definition
/*=============================================================*/
#define DIALOGAPP_RESET_WATCH_DOG_COUNT_FOR_AUTOMISSEDANDSNOOZE 3

typedef struct MMI_DIALOGAPP_TAG {
	APPLET_BASE_ELEMENTS;
    DialogApp_DialogInfo_t *pDialogInfo;
    VectorClass_t *pIHistoryQueue;
    IEVTCENTERSRV *pIEvtCenterSrv;
    IDataModel  *pIDialogActionModel;
    ModelListener_t DialogActionMdlListener;
    boolean bClosingAP;
    boolean bCountdownAlarmTimerExpired;
} MMI_DIALOGAPP;

MAE_Ret _SearchDialogFromHistory(MMI_DIALOGAPP* pThis, u16 nDialogViewID, DialogApp_DialogInfo_t** ppDialogInfo, u32* nIndexFound);
void _MergeDialogIfExist(MMI_DIALOGAPP* pThis, u16 nDialogViewID);
MAE_Ret _HandleStartUpCall(MMI_DIALOGAPP* pThis, u32 param);
MAE_Ret _RemoveAllAutoCloseDialogs(MMI_DIALOGAPP* pThis);
MAE_Ret _RemoveDialogTypeWithEvt(MMI_DIALOGAPP* pThis, u16 nType, u32 EvtCode);
static void _ActionModelListener(void *pUsrData, ModelEvent_t *pMdlEvent);
void _NotifySrv(DialogApp_DialogInfo_t* pDialogInfo, u32 EvtCode);
MAE_Ret _PurgeCurrentDialog(MMI_DIALOGAPP* pThis, boolean bASync);
void _CloseSelf(IBase *pUser, u32 Param);
MAE_Ret _RemoveDialogTypeWithEvt(MMI_DIALOGAPP* pThis, u16 nType, u32 EvtCode);
MAE_Ret _HandleStartUpCall(MMI_DIALOGAPP* pThis, u32 param);
MAE_Ret _RemoveAutoCloseDialogsFromHistroy(MMI_DIALOGAPP* pThis);
MAE_Ret _CopyStartUpParam(MMI_DIALOGAPP* pThis, u32 param);
MAE_Ret _PushDialogToHistory(MMI_DIALOGAPP* pThis);
MAE_Ret _GetDialogFromHistory(MMI_DIALOGAPP* pThis);
void _ShowDialog(MMI_DIALOGAPP* pThis);
/*=============================================================*/
// Global function definition
/*=============================================================*/
MAE_Ret DialogAppNew(MAE_ClsId id, void **ppObj);
MAE_Ret DialogConstructor(IApplet *pApplet,u32 nEvt,u32 nParam1,u32 nParam2);
MAE_Ret DialogDestructor(IApplet *pApplet, u32 nEvt, u32 param1, u32 param2);
boolean DialogStartCB(IApplet *pApplet, u32 nEvt, u32 param1, u32 param2);
boolean DialogStopCB(IApplet *pApplet, u32 nEvt, u32 param1, u32 param2);
boolean DialogResumeCB(IApplet *pApplet, u32 nEvt, u32 param1, u32 param2);
boolean DialogSuspendCB(IApplet *pApplet, u32 nEvt, u32 param1, u32 param2);
void DialogAutoCloseTimerCB(void* data);
MAE_Ret DialogConfirmCB(void *pApplet, u32 nEvt, u32 nParam1, u32 nParam2);
boolean DialogKeyPressCB(IApplet *pApplet, u32 nEvt, u32 nParam1, u32 nParam2);

void DialogAlarmTimerCB(void* data);
void DialogEvtHandleTypeNotify(void *pApplet, EvtCenter_Event_Handle_Type_e eEventHandleType);
void DialogActionModelListener(void *pUsrData, ModelEvent_t *pMdlEvent);
/*-------------------------------------------------------------------------*/
#endif /* __MMI_DIALOGAPP_PRIV_H__ */
